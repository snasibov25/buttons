<!-- templates/base.html -->
<!DOCTYPE html>
<html>
<head>
  <title>Random Pages</title>
</head>
<body>
  <a href="/">Home</a> |
  <a href="/random">Random</a>
  <hr>

  {% block content %}{% endblock %}

  <script>
    async function handleButton(btn) {
      const action = btn.dataset.action;
      const extra = btn.dataset.extra || "";

      const form = new FormData();
      form.append("action", action);
      form.append("count", btn.dataset.count || 0);

      const res = await fetch("/action", {
        method: "POST",
        body: form
      });

      const data = await res.json();

      if (btn.dataset.target) {
        document.getElementById(btn.dataset.target).innerText = data.result;
      }

      if (action === "counter") {
        btn.dataset.count = data.result;
      }
    }
  </script>
</body>
</html>
